sudo: required
services:
  - docker
language: node_js
node_js:
  - "8"
cache:
  directories:
    - "node_modules"
  yarn: true
after_success:
  - docker build -t gyselroth/kube-ldap:$TRAVIS_BRANCH .
  - test "$TRAVIS_TAG" != "" && docker login -u "$DOCKER_USERNAME" -p "$DOCKER_PASSWORD"
  - test "$TRAVIS_TAG" != "" && docker tag gyselroth/kube-ldap:$TRAVIS_BRANCH gyselroth/kube-ldap:latest
  - test "$TRAVIS_TAG" != "" && docker push gyselroth/kube-ldap:$TRAVIS_BRANCH
  - test "$TRAVIS_TAG" != "" && docker push gyselroth/kube-ldap:latest
